(this["webpackJsonpguest-book"]=this["webpackJsonpguest-book"]||[]).push([[0],{38:function(e,t,s){},58:function(e,t,s){},65:function(e,t,s){},66:function(e,t,s){},67:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s(32),r=s.n(n),c=(s(38),s(11)),i=s(12),o=s(14),u=s(13),h=s(2),l=s(9),m=s.n(l),d=s(15),b=s(5),j=s(16),p=s.n(j),g=(s(58),s(1)),v=function(e){Object(o.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={text:""},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a.keyPressedEnter=a.keyPressedEnter.bind(Object(b.a)(a)),a}return Object(i.a)(s,[{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("https://guest-book-node.herokuapp.com/topic");case 2:(t=e.sent)&&this.setState(t.data);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var s,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s=this.state.text,e.next=4,p.a.post("https://guest-book-node.herokuapp.com/topic/create",{text:s});case 4:(a=e.sent)&&(this.setState({text:""}),(n=this.state.msg).unshift(a.data.msg),this.setState({msg:n}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"keyPressedEnter",value:function(e){"Enter"===e.key&&this.handleSubmit(e)}},{key:"handleChange",value:function(e){this.setState({text:e.target.value})}},{key:"topicRender",value:function(e){var t=this,s=e.id,a=e.text;return Object(g.jsxs)("div",{className:"homePage_topicList_topic",onClick:function(){return t.props.history.push({pathname:"/topic",state:{id:s}})},children:[Object(g.jsx)("img",{src:"",alt:"TopicLogo",className:"topicLogo"}),Object(g.jsx)("p",{className:"topicDescription",children:a})]},s)}},{key:"render",value:function(){var e=this.state.msg;return e?Object(g.jsxs)("div",{className:"homePage",children:[Object(g.jsxs)("div",{className:"homePage__createTopic",children:[Object(g.jsx)("h1",{children:"Choose topic or create new"}),Object(g.jsx)("div",{children:Object(g.jsx)("div",{className:"topicRoom__messageForm",children:Object(g.jsxs)("form",{className:"topicRoom__messageForm__form",onSubmit:this.handleSubmit,onKeyPress:this.keyPressedEnter,children:[Object(g.jsx)("textarea",{placeholder:"Topic name",className:"customInput",value:this.state.text,onChange:this.handleChange}),Object(g.jsx)("input",{type:"submit",value:"Create",className:"button"})]})})})]}),Object(g.jsx)("div",{className:"homePage_topicList",children:e.map(this.topicRender,this)})]}):Object(g.jsx)("div",{})}}]),s}(a.Component),x=Object(h.f)(v),O=(s(65),function(e){Object(o.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={text:"",user_name:""},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a.keyPressedEnter=a.keyPressedEnter.bind(Object(b.a)(a)),a.userCreate=a.userCreate.bind(Object(b.a)(a)),a.userKeyPressedEnter=a.userKeyPressedEnter.bind(Object(b.a)(a)),a.userHandleChange=a.userHandleChange.bind(Object(b.a)(a)),a}return Object(i.a)(s,[{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("user_name")){e.next=8;break}return t=this.props.location.state.id,e.next=5,p.a.get("https://guest-book-node.herokuapp.com/message/".concat(t));case 5:s=e.sent,console.log(s),s&&this.setState({messages:s.data.msg});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var s,a,n,r,c,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s=this.state.text,a=new Date,n=this.props.location.state.id,r=localStorage.getItem("user_name"),e.next=7,p.a.post("https://guest-book-node.herokuapp.com/message/save",{text:s,date:a,topic_id:n,user_name:r});case 7:(c=e.sent)&&(this.setState({text:""}),(i=this.state.messages).unshift(c.data.msg),console.log(i),this.setState({messages:i}));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"keyPressedEnter",value:function(e){"Enter"===e.key&&this.handleSubmit(e)}},{key:"handleChange",value:function(e){this.setState({text:e.target.value})}},{key:"renderMessages",value:function(e){var t=e.id,s=e.text,a=e.date,n=e.user_name;return Object(g.jsxs)("div",{className:"topicRoom__messageList__message",children:[Object(g.jsxs)("div",{className:"aboutUser",children:[Object(g.jsx)("img",{src:"",alt:"UserLogo",className:"aboutUser__userLogo"}),Object(g.jsx)("p",{children:n})]}),Object(g.jsxs)("div",{className:"message",children:[Object(g.jsx)("span",{className:"date",children:a}),Object(g.jsx)("p",{className:"text",children:s})]})]},t)}},{key:"userCreate",value:function(e){e.preventDefault(),localStorage.setItem("user_name",this.state.user_name),this.setState({user_name:""}),window.location.reload()}},{key:"userKeyPressedEnter",value:function(e){"Enter"===e.key&&this.userCreate(e)}},{key:"userHandleChange",value:function(e){this.setState({user_name:e.target.value})}},{key:"render",value:function(){var e=this.state.messages;return e?Object(g.jsxs)("div",{className:"topicRoom",children:[Object(g.jsx)("div",{className:"topicRoom__messageForm",children:Object(g.jsxs)("form",{className:"topicRoom__messageForm__form",onSubmit:this.handleSubmit,onKeyPress:this.keyPressedEnter,children:[Object(g.jsx)("textarea",{placeholder:"Your message",className:"customInput",value:this.state.text,onChange:this.handleChange}),Object(g.jsx)("input",{type:"submit",value:"Send",className:"button"})]})}),Object(g.jsx)("div",{className:"topicRoom__messageList",children:e.map(this.renderMessages,this)})]}):Object(g.jsxs)("div",{className:"authUser",children:[Object(g.jsx)("p",{children:"Write your nickname"}),Object(g.jsx)("div",{className:"topicRoom__messageForm",children:Object(g.jsxs)("form",{className:"topicRoom__messageForm__form",onSubmit:this.userCreate,onKeyPress:this.userKeyPressedEnter,children:[Object(g.jsx)("textarea",{placeholder:"Your nickname",className:"customInput",value:this.state.user_name,onChange:this.userHandleChange}),Object(g.jsx)("input",{type:"submit",value:"Create",className:"button"})]})})]})}}]),s}(a.Component)),f=Object(h.f)(O),k=(s(66),function(e){Object(o.a)(s,e);var t=Object(u.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(i.a)(s,[{key:"render",value:function(){return Object(g.jsxs)(h.c,{children:[Object(g.jsx)(h.a,{path:"/",exact:!0,children:Object(g.jsx)(x,{})}),Object(g.jsx)(h.a,{path:"/topic",children:Object(g.jsx)(f,{})})]})}}]),s}(a.Component)),y=Object(h.f)(k),_=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,68)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;s(e),a(e),n(e),r(e),c(e)}))},C=s(17);r.a.render(Object(g.jsx)(C.a,{children:Object(g.jsx)(y,{})}),document.getElementById("root")),_()}},[[67,1,2]]]);
//# sourceMappingURL=main.1c45cb4b.chunk.js.map